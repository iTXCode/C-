### 第一章

**数据:** 描述事物的符号记录

**数据库:** 长期存储在计算机内、有组织的、可共享的大量数据的集合

**数据库管理系统:** 位于用户和操作系统之间的一层数据管理软件

**数据库系统:** 由数据库、数据库管理系统(及其应用开发工具)，应用程序和数据库管理员组成的储存、管理、处理和维护数据的系统

**实体:** 客观存在并可以相互区别的事物

**属性：** 实体所具有的某一特性

**码：** 唯一标识实体的属性集

**联系：** 实体之间的联系通常指不同实体集之间的联系(实体之间的联系:一对一，一对多，多对多几种)

**逻辑数据模型**

**三要素：**  1.数据结构 2.数据操作3.数据的完整性约束条件

#### 数据库系统结构

##### 1.模式:是数据库中全体数据的逻辑结构和特征的描述，是所有用户的公共数据视图

##### 2.外模式:也成子模式或用户模式。外模式通常是模式的子集

##### 3.内模式： 一个数据库只有一个内模式，是数据物理结构和存储方式的描述，是数据在数据库内部的组织方式(数据库的内模式依赖于它的全局逻辑结构)

##### 二级映像:

###### 1.外模式/模式映像:定义了该外模式与模式之间的对应关系，

###### 逻辑独立性:。应用程序是依据数据的外模式编写的，从而应用程序不必修改。保证了数据与程序的逻辑独立性

###### 2.模式/内模式映像:定义了数据全局逻辑结构和存储结构之间的对应关系，

###### 物理独立性: 数据库管理员对模式/内模式映像作相应改变，可以使模式保持不变，从而应用程序也不必改变。保证了数据与程序的物理独立性。

### 第二章

#### 关系模式

##### 关系：关系模式中数据逻辑的一张表就叫关系 

**(关系是关系模式在某一时刻的状态或内容)，关系模式是静态的稳定的，而关系是动态的**

##### 元组：笛卡儿积中的 一个元素 叫做一个元组

##### 属性：二维表中的一列叫做属性

##### 关系模式:对关系的描述，

##### 候选码：若关系的某一属性组的值能唯一的标识一个元组，而其子集不能，则称该属性组为候选码

##### 外码：如果关系中属性或者属性组不是本关系的码，而是引用其他关系或者本关系的码；则称该关系的外码

##### 关系的性质：一个关系中不能有两个完全相同的元组，元组顺序无所谓；不能有两同名属性；属性可取自同一个域

#### 数据操作

#### 实体完整性

##### 实体完整性规则：若属性(指一个或者属性)A是基本关系R的主属性，则A不能取空值(null value)

**主码非空且唯一**

#### 参照完整性

##### 参照完整性规则：若属性(或属性组)F是基本关系R的外码，它的基本关系S的主码Ks相对应。

##### 外码不能引用不存在的值

##### 用户定义的完整性约束：和具体的业务规则相关

###        数据操作

#### 关系代数

##### 除运算:设关系R除以关系S的结果为关系T，则T包含所有在R单不在S中的属性及其值，且T的元组与S的元组的所有组合都在R中

#### 数据更新

##### 插入元素:insert

````
insert
into student(sno,sname,ssex,sdept,sage)
values('20121526','张三','男’,'is');
````

##### 修改数据:update

````
update student
set sage=22
where sno='201215121';
````

##### 删除数据delete

````
delete
from student
where sno='20121518'
````

#### 视图

##### 定义视图

````
//建立信息系学生系统视图
create view IS_student
as
select sno,sname,sage
from student
where sdept='is';
````

##### 删除视图

````
drop view BT_IS
````

##### 查询视图

````
select sno,sage
from is_student
where sage<20;
````

##### 更新视图

````
update IS_Student
set Sname='刘晨'
where sno='201215122'and sdept='is'
````



### 第四章

##### DAC(自动存取控制)

> 在TCSEC中属于C2级别；
>
> c1级别只提供非常初级的自主安全保护，能够实现对用户何数据的分离。



##### MAC(强制存取控制)

> 在TCSEC中属于B1级别



##### 授权用户(GRANT)

````
//把查询student表的权限授给用户
grant select
on table student
to u1
````

````
//把对student表何表course表的全部操作权限授予用户u2和u3
grant all privileges
on table student,course
to u1,u2
````

````
//把对表sc的查询权限授予所有用户
grant select
from table sc
to public;
````

````
//把对表sc的insert权限授予U5用户，并允许将此权限再授予其他用户
grant insert
on table sc
to u5
with grant option
````

##### 收回权限(REVOKE)

````
//把用户u4修改学生学号的权限收回
revoke update(sno)
on table student
from u4;
````

````
//收回所有用户对表scc的查询权限
revoke select 
on table sc
from public;
````

````
//把用户u5对sc表的insert权限收回
revkoe insert
on table sc
from u5 cascade
````

#### 角色:数据库角色是被命名的一组数据库操作相关的权限，角色是权限的集合

##### 角色的创建

````
grant role <角色名>
````

##### 给角色授权

````
grant <权限>
on <对象>
to<角色>
````

##### 将一个角色授予其他的角色或用户

````
grant <角色>
to <角色>
[with admin option]
````

##### 角色权限收回

````
revoke<权限>
on <对象类型><对象名>
from <角色>
````

##### 通过角色来实现将一组权限授予一个用户

##### 首先创建一个角色R1

````
create role R1;
````

##### 使用grant语句，使角色R1拥有student表的SELECT，UPDATE，INSERT权限

````
　grant　selet，UPDATE，INSERT
　ON TABLE 　STUDENT
　TO　Ｒ１；
````

##### 将这个角色授予王平、张明、赵玲，是他们具有角色Ｒ１所包含的全部权限

````
GRANT R1
TO 王平，张明，赵玲；
````

##### 一次性地通过R1来收取王平的这三个权限

````
REVOKE R1
FROM 王平；
````

### 第五章

##### 定义完整约束(primary key)

##### 定义参照完整性约束(foreign key(对象) references 表名(参照对象))

**参照完整性约束将两个表中相应元组联系起来了**

#### 完整性约束命名子句

##### 1.完整性约束命名子句

**constraint<完整性约束条件名> <完整性约束条件>**

**其中完整性(NOT　ＮULL,UNIQUE,PRIMARY KEY,FOREIGN KEY,CHECK)**

**建立学生登记表Student,要求学号在90000~999999之间，姓名不能取空值，年龄小于30,性别之能是"男"或"女"**

````
create table student
(
sno numeric(10)
constraint c1 check(sno berween 90000 and 999999),
sname char(20)
constraint c2 not NULL,
sage numeric(3)
constraint c3 check(sage<30),
ssex char(2)
constraint c4 check(ssex in('男','女')),
constraint studentKey primary key(sno)
)
````

